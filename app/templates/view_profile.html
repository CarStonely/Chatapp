<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ user.username }}'s Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Favicon -->
  <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link 
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" 
    rel="stylesheet">
  
  <!-- Bootstrap CSS for Responsive Design and Components -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoY6b4UKr3oBlb2qz2H3zjE5R1nldoR4o9Bs0R0LqBMU8Y+" 
    crossorigin="anonymous">
  
  <!-- Font Awesome for Icons -->
  <link 
    rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" 
    integrity="sha512-Fo3rlrZj/k7ujTnHq6X0iS3OECpXr+IhqMIHdzgiNjFFlz0zTFOhLLFYJzQrQIg7VHPxC4m8MkG/tybU+8/H4g==" 
    crossorigin="anonymous" 
    referrerpolicy="no-referrer" />
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/view_profile.css') }}">
  
</head>
<body>
  
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-brand" onclick="window.location.href='{{ url_for('chat.index') }}'">ChatApp</div>
    <div class="navbar-toggler">&#9776;</div>
    <div class="navbar-menu">
      <span>Logged in as <strong>{{ session['username'] }}</strong></span>
      {% if 'user_id' in session %}
        <a href="{{ url_for('auth.profile') }}">Profile</a>
        <a href="{{ url_for('chat.index') }}">Room Selector</a>
        <a href="{{ url_for('auth.logout') }}">Logout</a>
      {% else %}
        <a href="{{ url_for('auth.login') }}">Login</a>
        <a href="{{ url_for('auth.register') }}">Register</a>
      {% endif %}
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container position-relative">
    <!-- Loading Indicator for Actions (Optional) -->
    <div id="profile-loading" class="loading-overlay">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Processing...</span>
      </div>
    </div>

    <!-- Profile Card -->
    <div class="profile-container">
      <h1>{{ user.username }}'s Profile</h1>


      <!-- Display User's Profile Picture -->
      <img src="{{ user.profile_picture or url_for('static', filename='images/default_avatar.png') }}" alt="Profile Picture" class="profile-avatar">

      <!-- Bio Preview -->
      <div class="bio-preview">
        <h3>Bio:</h3>
        <p>{{ user.bio or "No bio provided." }}</p>
      </div>

    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2024 Chat Application. Built with ❤️ for seamless conversations.</p>
  </footer>

  <!-- Bootstrap JS Bundle (includes Popper for tooltips) -->
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+U3zY4AmoF6Ykvh+8t8enY4K+5q6E" 
    crossorigin="anonymous">
  </script>

  <!-- Pass Server-Side Messages to JavaScript -->
  <script>
    window.flashedMessages = {{ get_flashed_messages(with_categories=true)|tojson }};
  </script>

  <!-- Custom JS -->
  <script src="{{ url_for('static', filename='js/view_profile.js') }}"></script>
  
</body>
</html>
